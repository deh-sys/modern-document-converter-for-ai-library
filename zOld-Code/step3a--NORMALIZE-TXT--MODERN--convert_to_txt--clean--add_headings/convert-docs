#!/usr/bin/env bash

# Wrapper that runs the local doc_to_markdown CLI using the bundled virtualenv.

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PYTHON_BIN="${SCRIPT_DIR}/venv/bin/python"

if [[ ! -x "${PYTHON_BIN}" ]]; then
    echo "Virtual environment not found. Please run 'python3 -m venv venv' and install requirements." >&2
    exit 1
fi

# Ensure the in-repo sources are imported rather than any globally installed package.
export PYTHONPATH="${SCRIPT_DIR}:${PYTHONPATH:-}"

exec "${PYTHON_BIN}" -m doc_to_markdown.cli "$@"
